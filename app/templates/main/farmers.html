{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>Farmers</h1>
    <p>This is the farmers page.</p>

    <h2>Banking Information</h2>
    {% if bank_accounts %}
        <ul>
        {% for account in bank_accounts %}
            <li>{{ account.name }}: {{ account.balance }} {{ account.currency }}</li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No banking information available.</p>
    {% endif %}

    <h2>Owned Parcels</h2>
    {% if parcels %}
        <p>Total Acres: {{ total_acres }}</p>
        <ul>
        {% for parcel in parcels %}
            <li>{{ parcel.location }} - {{ parcel.size }} acres</li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No parcels owned.</p>
    {% endif %}

    <div class="row">
        <div class="col-md-6">
            <h3>Add a New Parcel</h3>
            <form method="POST" action="{{ url_for('main.farmers') }}">
                {{ parcel_form.hidden_tag() }}
                <div class="form-group">
                    {{ parcel_form.location.label(class="form-control-label") }}
                    {{ parcel_form.location(class="form-control") }}
                </div>
                <div class="form-group">
                    {{ parcel_form.size.label(class="form-control-label") }}
                    {{ parcel_form.size(class="form-control") }}
                </div>
                <div class="form-group">
                    {{ parcel_form.submit(class="btn btn-primary") }}
                </div>
            </form>
        </div>
        <div class="col-md-6">
            <h3>Submit an Insurance Claim</h3>
            <form method="POST" action="{{ url_for('main.farmers') }}">
                {{ insurance_form.hidden_tag() }}
                <div class="form-group">
                    {{ insurance_form.reason.label(class="form-control-label") }}
                    {{ insurance_form.reason(class="form-control") }}
                </div>
                <div class="form-group">
                    {{ insurance_form.submit(class="btn btn-primary") }}
                </div>
            </form>
        </div>
    </div>

    <h2>Insurance Claims</h2>
    {% if insurance_claims %}
        <ul>
        {% for claim in insurance_claims %}
            <li>{{ claim.claim_date.strftime('%Y-%m-%d') }}: {{ claim.reason }} - {{ claim.status.value }}</li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No insurance claims found.</p>
    {% endif %}

    <h2>Registered Vehicles</h2>
    {% if vehicles %}
        <ul>
        {% for vehicle in vehicles %}
            <li>{{ vehicle.license_plate }} - {{ vehicle.vehicle_make }} {{ vehicle.vehicle_model }}</li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No vehicles registered.</p>
    {% endif %}
</div>
{% endblock %}
