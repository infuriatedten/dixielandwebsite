{% macro quick_form(form, action_url='', method='post', enctype=None, button_map={'submit': 'primary'}) -%}
    <form
        {% if action_url %} action="{{ action_url }}" {% endif %}
        method="{{ method }}"
        role="form"
        {% if enctype %} enctype="{{ enctype }}" {% endif %}
    >
        {{ form.hidden_tag() }}
        {% for field in form if not field.flags.hidden %}
            {{ render_field(field, button_map=button_map) }}
        {% endfor %}
    </form>
{%- endmacro %}

{% macro render_field(field, label_visible=True, class_='form-control', id=None, placeholder=None, rows=None, button_map={}) %}
    <div class="form-group mb-3">
        {% if label_visible and field.type != 'SubmitField' %}
            {{ field.label(class="form-label") }}
        {% endif %}

        {% if field.type == 'BooleanField' %}
            <div class="form-check">
                {{ field(class="form-check-input") }}
                {{ field.label(class="form-check-label") }}
            </div>
        {% elif field.type == 'RadioField' %}
            {% for subfield in field %}
                <div class="form-check">
                    {{ subfield(class="form-check-input") }}
                    {{ subfield.label(class="form-check-label") }}
                </div>
            {% endfor %}
        {% elif field.type == 'SubmitField' %}
            {{ field(class='btn btn-' + button_map.get(field.name, 'secondary')) }}
        {% else %}
            {% set field_class = class_ %}
            {% if field.errors %}
                {% set field_class = field_class + ' is-invalid' %}
            {% endif %}
            {{ field(class=field_class, id=id or field.id, placeholder=placeholder or field.label.text, rows=rows) }}
        {% endif %}

        {% if field.errors %}
            {% for error in field.errors %}
                <div class="invalid-feedback d-block">
                    {{ error }}
                </div>
            {% endfor %}
        {% endif %}
    </div>
{% endmacro %}
